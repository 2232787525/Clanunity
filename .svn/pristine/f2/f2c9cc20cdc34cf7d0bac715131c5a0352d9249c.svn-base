//
//  DeviceConfigure.m
//  Clanunity
//
//  Created by wangyadong on 2018/1/30.
//  Copyright © 2018年 DlmTechnology. All rights reserved.
//

#import "DeviceConfigure.h"

@implementation DeviceConfigure


/**
 手机此刻的网络类型
 
 @return 2G，3G，4G，Wifi等并且带上信号强如量
 */
+(NSString *)networkingStates{
    NSArray *subviews = [[[[UIApplication sharedApplication] valueForKey:@"statusBar"] valueForKey:@"foregroundView"]subviews];
    
    NSNumber *dataNetworkItemView = nil;
    NSNumber *signalStrengthItemView = nil;
    for (id subview in subviews) {
        if([subview isKindOfClass:[NSClassFromString(@"UIStatusBarDataNetworkItemView") class]]) {
            dataNetworkItemView = subview;
        }
        if ([subview isKindOfClass:[NSClassFromString(@"UIStatusBarSignalStrengthItemView") class]]) {
            signalStrengthItemView = subview;
        }
        if (dataNetworkItemView && signalStrengthItemView) {
            break;
        }
    }
    
    if (!dataNetworkItemView) {
        return nil;
    }
    
    NSNumber *networkTypeNum = [dataNetworkItemView valueForKey:@"dataNetworkType"];
    NSNumber *wifiStrengthBars = [dataNetworkItemView valueForKey:@"wifiStrengthBars"];
    NSNumber *signalStrengthBars = [signalStrengthItemView valueForKey:@"signalStrengthBars"];
    if (!networkTypeNum) {
        return nil;
    }
    
    NSInteger networkType = [networkTypeNum integerValue];
    switch (networkType) {
        case 0:
            return @"No Service";
            break;
            
        case 1:
            return [[NSString alloc] initWithFormat:@"%@_%@", @"2G", signalStrengthBars];
            break;
            
        case 2:
            return [[NSString alloc] initWithFormat:@"%@_%@", @"3G", signalStrengthBars];
            break;
            
        case 3:
            return [[NSString alloc] initWithFormat:@"%@_%@", @"4G", signalStrengthBars];
            break;
            
        case 4:
            return [[NSString alloc] initWithFormat:@"%@_%@", @"LTE", signalStrengthBars];
            break;
            
        case 5:
            return [[NSString alloc] initWithFormat:@"%@_%@", @"WiFi", wifiStrengthBars];
            break;
        default:
            return [[NSString alloc] initWithFormat:@"%@_%@_%@", networkTypeNum, wifiStrengthBars, signalStrengthBars];
            break;
    }
}

@end
